# 阿里巴巴前端开发一面

本文记录了作者参加阿里巴巴前端开发工程师面试的经历和技术要点。主要涉及 React 生态、性能优化、工程化等方面的内容。

## 一、自我介绍

经过多次面试经历后，终于等来了阿里巴巴的面试机会。整个面试过程持续了约 1 小时，面试官很友好，问题也比较有深度。

## 二、React 相关问题

### React 生命周期
- 挂载阶段
- 更新阶段
- 卸载阶段
- 新版生命周期的变化

示例代码：

```jsx
class Example extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }

  componentDidMount() {
    console.log('组件已挂载');
  }

  componentDidUpdate(prevProps, prevState) {
    console.log('组件已更新');
  }

  componentWillUnmount() {
    console.log('组件将要卸载');
  }

  render() {
    return <div>{this.state.count}</div>;
  }
}
```

### Hooks 使用及原理
- useState 原理
- useEffect 使用场景
- 自定义 Hooks 开发
- Hooks 使用规则

Hooks 示例：

```typescript
import { useState, useEffect } from 'react';

// 自定义 Hook
function useWindowSize() {
  const [size, setSize] = useState({ width: 0, height: 0 });

  useEffect(() => {
    function updateSize() {
      setSize({ width: window.innerWidth, height: window.innerHeight });
    }
    
    window.addEventListener('resize', updateSize);
    updateSize();
    
    return () => window.removeEventListener('resize', updateSize);
  }, []);

  return size;
}

// 使用自定义 Hook
function App() {
  const size = useWindowSize();
  return (
    <div>
      窗口大小: {size.width} x {size.height}
    </div>
  );
}
```

## 三、性能优化

### React 性能优化
1. 虚拟 DOM 和 Diff 算法
2. React.memo 的使用
3. useMemo 和 useCallback
4. 懒加载和代码分割

性能优化示例：

```typescript
import React, { useMemo, useCallback } from 'react';

interface Props {
  items: number[];
  onItemClick: (item: number) => void;
}

const ExpensiveList = React.memo(({ items, onItemClick }: Props) => {
  const sortedItems = useMemo(() => {
    console.log('重新排序...');
    return [...items].sort((a, b) => a - b);
  }, [items]);

  const handleClick = useCallback((item: number) => {
    console.log('点击项目:', item);
    onItemClick(item);
  }, [onItemClick]);

  return (
    <ul>
      {sortedItems.map(item => (
        <li key={item} onClick={() => handleClick(item)}>
          {item}
        </li>
      ))}
    </ul>
  );
});
```

### 前端通用优化手段
1. 资源压缩与合并
2. 图片优化
3. 浏览器缓存
4. CDN 加速

## 四、工程化相关

### Webpack 配置
- loader 和 plugin
- 打包优化
- 热更新原理
- Tree Shaking

Webpack 配置示例：

```javascript
const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
  entry: './src/index.ts',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: '[name].[contenthash].js'
  },
  module: {
    rules: [
      {
        test: /\.tsx?$/,
        use: 'ts-loader',
        exclude: /node_modules/
      },
      {
        test: /\.css$/,
        use: [MiniCssExtractPlugin.loader, 'css-loader']
      }
    ]
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: './src/index.html'
    }),
    new MiniCssExtractPlugin({
      filename: '[name].[contenthash].css'
    })
  ],
  optimization: {
    splitChunks: {
      chunks: 'all'
    }
  }
};
```

### 前端部署
- CI/CD
- Docker
- Nginx 配置
- 灰度发布

Nginx 配置示例：

```nginx
server {
    listen 80;
    server_name example.com;

    location / {
        root /usr/share/nginx/html;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    location /api {
        proxy_pass http://backend:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## 结语

阿里的面试更注重基础知识的掌握程度和实际问题的解决能力，建议深入学习原理，多做实践。 